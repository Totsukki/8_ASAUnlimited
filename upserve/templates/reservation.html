<!DOCTYPE html>
{% load static %}
<html lang="en">

  <head>
    <style>
        .col-sm-8 input::placeholder {
            color: black;
            opacity: .75;
        }
    </style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASA Unlimited | Administrator Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.css" integrity="sha512-bYPO5jmStZ9WI2602V2zaivdAnbAhtfzmxnEGh9RwtlI00I9s8ulGe4oBa5XxiC6tCITJH/QG70jswBhbLkxPw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'assets/admin-assets/img/svg/logo.svg' %}" type="image/x-icon">
    <!-- Custom styles -->
    <link rel="stylesheet" href="{% static 'assets/admin-assets/css/style.min.css' %}">
</head>


<body>
  <div class="layer"></div>
<!-- ! Body -->
<a class="skip-link sr-only" href="#skip-target">Skip to content</a>
<div class="page-flex">
  <!-- ! Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-start">
        <div class="sidebar-head">
            <a href="index" class="logo-wrapper" title="Home">
                <span class="sr-only">Home</span>
                <span aria-hidden="true"> <img href="index" src="{% static 'assets/images/ASA Unlimited-logos/ASA Unlimited-logos_white.png' %}" alt="ASA Unlimited"></span>
                <div class="logo-text">
                    <!-- <span class="logo-title">ASA Unlimited</span> -->
                    <span class="logo-subtitle">Dashboard</span>
                </div>

            </a>
            <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
                <span class="sr-only">Toggle menu</span>
                <span class="icon menu-toggle" aria-hidden="true"></span>
            </button>
        </div>
        <div class="sidebar-body">
            <ul class="sidebar-body-menu">
              <li>
                <a href="admin_dashboard"><span class="icon home" aria-hidden="true"></span>Dashboard</a>
            </li>
            <li>
              <a href="users"><span class="icon folder" aria-hidden="true"></span>Users</a>
          </li>
          <li>
            <a href="rooms"><span class="icon image" aria-hidden="true"></span>Rooms</a>
        </li>
        <li>
          <a class="active" href="reservations"><span class="icon document" aria-hidden="true"></span>Reservations</a>
       </li>
          
            </ul>
        </div>
    </div>
    <div class="sidebar-footer">
        <a href="##" class="sidebar-user">
            <span class="sidebar-user-img">
                <picture><source srcset="{% static 'assets/admin-assets/img/avatar/avatar-illustrated-01.webp' %}" type="image/webp"><img src="{% static 'assets/admin-assets/img/avatar/avatar-illustrated-01.png' %}" alt="User name"></picture>
            </span>
            <div class="sidebar-user-info">
                <span class="sidebar-user__title">Gemarlo A.</span>
                <span class="sidebar-user__subtitle">Technical Manager</span>
            </div>
        </a>
    </div>
</aside>
  <div class="main-wrapper">
   <!-- ! Main nav -->
            <nav class="main-nav--bg">
                <div class="container main-nav">
                    <div class="main-nav-start">
                        <div class="search-wrapper">
                            <i data-feather="search" aria-hidden="true"></i>
                            <input type="text" placeholder="Enter keywords ..." required>
                        </div>
                    </div>
                    <div class="main-nav-end">
                        <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
        <span class="sr-only">Toggle menu</span>
        <span class="icon menu-toggle--gray" aria-hidden="true"></span>
      </button>

                        <button class="theme-switcher gray-circle-btn" type="button" title="Switch theme">
        <span class="sr-only">Switch theme</span>
        <i class="sun-icon" data-feather="sun" aria-hidden="true"></i>
        <i class="moon-icon" data-feather="moon" aria-hidden="true"></i>
      </button>

                        <div class="nav-user-wrapper">
                            <button href="##" class="nav-user-btn dropdown-btn" title="My profile" type="button">
          <span class="sr-only">My profile</span>
          <span class="nav-user-img">
            <picture><source srcset="{% static 'assets/admin-assets/img/avatar/avatar-illustrated-02.webp' %}" type="image/webp"><img src="{% static 'assets/admin-assets/img/avatar/avatar-illustrated-02.png' %}" alt="User name"></picture>
          </span>
        </button>
                            <ul class="users-item-dropdown nav-user-dropdown dropdown">
                                <!-- <li>
                                    <a href="##">
                                        <i data-feather="user" aria-hidden="true"></i>
                                        <span>Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="##">
                                        <i data-feather="settings" aria-hidden="true"></i>
                                        <span>Account settings</span>
                                    </a>
                                </li> -->
                                <li>
                                    <a class="danger" href="index">
                                        <i data-feather="log-out" aria-hidden="true"></i>
                                        <span>Log out</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
    <!-- Main -->
    <main class="main users chart-page" id="skip-target">
      <div class="container">
        <h2 class="main-title">Reservation</h2>
        <div class="row stat-cards">
          <div class="card-body px-0 pt-0 pb-2">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createModal" name="btnCreate">Create</button>
                            <br><br>
                            <!-- Modal CREATE-->
                            <div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-labelledby="newModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h3 class="modal-title">Create Room</h3>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                                </button>
                                        </div>
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="modal-body">
                                                <input type="hidden" name="resid">
                                                <div class="row">
                                                    <div class="col-12" id="startup-tab-1">
                                                        <div class="row">    
                                                          <div class="col-sm-8">
                                                            <label>First Name of Client</label>
                                                            <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="fname" placeholder="First Name" name="fname">
                                                            {% for user in users %}
                                                              <option value="{{user.fname}}">{{user.fname}}</option>
                                                            {% endfor %}
                                                            </select>
                                                         </div>
                                                            <div class="col-sm-8">
                                                                <label>Date</label>
                                                                <input name="sched" id="datetimepicker" style="padding-left: 10px;background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;"placeholder="--/--/----" class="datepicker" type="text" width="10%" required onkeypress="return false" autocomplete='off'>
                                                                <i class="fa fa-calendar" style="cursor: pointer; margin-left: -30px; pointer-events: none;"></i> 
                                                            </div>
                                                            <div class="col-sm-8">
                                                              <label>Room Name</label>
                                                              <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="rmname" placeholder="Room Name" name="rmname">
                                                              {% for room in rooms %}
                                                                <option value="{{room.rmname}}">{{room.rmname}}</option>
                                                              {% endfor %}
                                                              </select>
                                                           </div>
                                                         <div class="col-sm-8">
                                                          <label>Time Slot</label>
                                                          <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="tmslt" placeholder="Time Slot" name="tmslt">
                                                            <option value="Morning">Morning</option>
                                                            <option value="Afternoon">Afternoon</option>
                                                            <option value="Evening">Evening</option>
                                
                                                          </select>
                                                       </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="button btn-primary" name="btnCreate" style="border-radius: 5px; border-width: 0px; padding: 10px; padding-left: 50px; padding-right: 50px;">Create</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </form>
                                        </div>
                                    </div>
                                </div>
                              </div>

            <div class="table-responsive p-0">
              <table id="dataTable" class="table align-items-center mb-0 table-striped table-bordered">
                <thead>
                  <tr>
                  
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Name</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Date</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Room Name</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Room Type</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Timeslot</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Update/Delete</th>
                  </tr>
                </thead>
                <tbody>
                  
                  {% for reservation in reserve %}

                  <tr>
                    <td>
                      <div class="d-flex px-2 py-1">
                        <div class="d-flex flex-column justify-content-center">
                          {% for user in users %}
                            {% if reservation.uid_id == user.uid %}
                              <h6 class="mb-0 text-sm">{{user.fname}}</h6>
                            {% endif %}
                          {% endfor %}
                        </div>
                      </div> 
                    </td>
                    <td>
                      <div class="d-flex px-2 py-1">
                        <div class="d-flex flex-column justify-content-center">
                          <h6 class="mb-0 text-sm">{{reservation.date}}</h6>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div class="d-flex px-2 py-1">
                        <div class="d-flex flex-column justify-content-center">
                        {%for room in rooms%}
                          {% if reservation.rmid_id == room.rmid %}
                            <h6 class="mb-0 text-sm">{{room.rmname}}</h6>
                          {% endif %}
                        {%endfor%}
                        </div>
                      </div>
                    </td>
                    <td>
                      <div class="d-flex px-2 py-1">
                        <div class="d-flex flex-column justify-content-center">
                        {%for room in rooms%}
                          {% if reservation.rmid_id == room.rmid %}
                          <h6 class="mb-0 text-sm">{{room.rmtype}}</h6>
                          {% endif %}
                        {%endfor%}
                        </div>
                      </div>
                    </td>
                    <td>
                      <div class="d-flex px-2 py-1">
                        <div class="d-flex flex-column justify-content-center">
                          <h6 class="mb-0 text-sm">{{reservation.tmslt}}</h6>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div class="d-flex px-2 py-1">
                          <div class="d-flex flex-column justify-content-center">
                              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#updateModal-{{reservation.resid}}" name="btnUpdate"><i class="fa fa-wrench"></i></button>
                          </div>&nbsp;&nbsp;&nbsp;&nbsp;
                          <div class="d-flex flex-column justify-content-center">
                              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#deleteModal-{{reservation.resid}}" name="btnDelete"><i class="fa fa-trash"></i></button>
                          </div>
                      </div>
                  </td>
                  </tr>
              
                </div>
                 <!-- Modal DELETE -->
                 <div class="modal fade" id="deleteModal-{{reservation.resid}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style='background-color: rgba(0,0,0,0.5);'>
                  <div class="modal-dialog" role="document">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">DELETE ROOM</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
                          </div>
                          <form id="deleteForm" method="post">
                              {% csrf_token %}
                              <input type="hidden" name="resid" value="{{reservation.resid}}">
                              <div class="modal-body">
                                  Are you sure you want to delete this reservation?
                              </div>
                              <div class="modal-footer">
                                  <button type="submit" id="btnDelete" name="btnDelete" class="btn btn-primary" style="margin-left: 330px;">YES</button>
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">NO</button>
                              </div>
                      </div>
                      </form>
                  </div>
              </div>
              <!-- Modal UPDATE-->
              <div class="modal fade" id="updateModal-{{reservation.resid}}" tabindex="-1" role="dialog" aria-labelledby="newModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h3 class="modal-title">Update Details</h3>
                              <button type="button" class="close"data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
    </button>
                          </div>
                          <form method="post">
                            {% csrf_token %}
                            <div class="modal-body">
                                <input type="hidden" name="resid" value="{{reservation.resid}}">
                                <div class="row">
                                    <div class="col-12" id="startup-tab-1">
                                        <div class="row">    
                                          <div class="col-sm-8">      
                                            <label>First Name of Client</label>                                     
                                            <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="fname" placeholder="First Name" name="fname">
                                              {% for user in users %}
                                              {% if reservation.uid_id == user.uid %}
                                                <option value="{{user.fname}}" selected>{{user.fname}}</option>
                                              {%else%}
                                                <option value="{{user.fname}}">{{user.fname}}</option>
                                              {% endif %}
                                              {% endfor %}
                                            </select>
                                         </div>
                                            <div class="col-sm-8">
                                                <label>Date</label>
                                                <input type="text" style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="date" placeholder="Date" name="date" value="{{reservation.date}}">
                                            </div>
                                            <div class="col-sm-8">
                                              <label>Room Name</label>
                                              <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="rmname" placeholder="Room Name" name="rmname" value="{{room.rmname}}">
                                                {% for room in rooms %}
                                                {% if reservation.rmid_id == room.rmid %}
                                                <option value="{{room.rmname}}" selected>{{room.rmname}}</option>
                                                {%else%}
                                                <option value="{{room.rmname}}">{{room.rmname}}</option>>
                                                {% endif %}
                                                {% endfor %}
                                              </select>
                                           </div>
                                         <div class="col-sm-8">
                                          <label>Time Slot</label>
                                          <select style="background-color:rgb(255, 255, 255); border: solid rgb(209, 209, 209) 1px !important;" class="form-control-sm" id="tmslt" placeholder="Time Slot" name="tmslt">
                                                {% if reservation.tmslt == "Morning"%}    
                                                <option value="Morning" selected>Morning</option>
                                                <option value="Afternoon">Afternoon</option>
                                                <option value="Evening">Evening</option>
                                                {% endif %}
                                                {% if reservation.tmslt == "Afternoon"%}
                                                <option value="Morning" selected>Morning</option>
                                                <option value="Afternoon" selected>Afternoon</option>
                                                <option value="Evening">Evening</option>
                                                {% endif %}
                                                {%if reservation.tmslt == "Evening"%}
                                                <option value="Morning" selected>Morning</option>
                                                <option value="Afternoon">Afternoon</option>
                                                <option value="Evening" selected>Evening</option>
                                                {% endif %}
                                            
                                          </select>
                                       </div>
                                            <div class="modal-footer">
                                                <button type="submit" class="button btn-primary" name="btnUpdate" style="border-radius: 5px; border-width: 0px; padding: 10px; padding-left: 50px; padding-right: 50px;">Update</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </form>
                          </div>
                      </div>
                  </div>
                  {% endfor %}
                </tbody>
              </table>
            </div>
        </div>
      </div>
    </main>
    <!-- ! Footer -->
    <footer class="footer">
  <div class="container footer--flex">
    <div class="footer-start">
      <p>2021 © Elegant Dashboard - <a href="elegant-dashboard.com" target="_blank"
          rel="noopener noreferrer">elegant-dashboard.com</a></p>
    </div>
    <ul class="footer-end">
      <li><a href="index">Main Site</a></li>
    </ul>
  </div>
</footer>
  </div>
</div>
  <!-- Chart library -->
  <script src="{% static 'assets/admin-assets/plugins/chart.min.js' %}"></script>
  <!-- Icons library -->
  <script src="{% static 'assets/admin-assets/plugins/feather.min.js' %}"></script>
  <!-- Custom scripts -->
  <script src="{% static 'assets/admin-assets/js/script.js' %}"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js" integrity="sha512-AIOTidJAcHBH2G/oZv9viEGXRqDNmfdPVPYOYKGy3fti0xIplnlgMHUGfuNRzC6FkzIo0iIxgFnr9RikFxK+sw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <script>
        jQuery('#datetimepicker').datetimepicker(
            {
                timepicker: false,
                format: 'm-d-Y',
                minDate:'0',
            }
        );
    </script>
<script>

    $(document).ready(function() {
    var table = $('#dataTable').DataTable({
        searchPanes: true
    });
    table.searchPanes.container().prependTo(table.table().container());
    table.searchPanes.resizePanes();
});
</script>
</body>
</html>